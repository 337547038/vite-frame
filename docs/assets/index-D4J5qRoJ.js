import{i as Q,d as N,u as D,j as K,r as y,k as q,l as P,f as J,b as n,o as a,g as x,e,w as t,F as B,n as I,c as i,p as v,t as F,q as V,s as M,h as U,v as W,x as Y,K as Z,y as ee}from"./index-BqfPSI0J.js";const te=""+new URL("logo-CPmPqqKk.png",import.meta.url).href,A=window.sessionStorage.getItem("tagViews");let O=[];A&&(O=JSON.parse(A));const R=Q("layout",{state:()=>({breadcrumb:[],tabs:O}),actions:{changeBreadcrumb(C){this.breadcrumb=C},setTabsViews(C){this.tabs=C,window.sessionStorage.setItem("tagViews",JSON.stringify(C))}}}),ne={class:"tag-tabs"},le={class:"tabs-label"},ae=N({__name:"tagViews",props:{navList:{default:()=>[]}},setup(C){const _=R(),d=C,l=D(),h=K(),p=y(),s=q(()=>(_==null?void 0:_.tabs)||[]),u=b=>{p.value=b,h.push({path:b})},r=(b,c,f)=>{const w=s.value.filter(m=>m.path!==b.path);if(c>0){const m=s.value[c-1].path;p.value=m,h.push({path:m})}else c===0&&h.push({path:"/"});_.setTabsViews(w),f.stopPropagation()},o=()=>{var c;if(((c=l.meta)==null?void 0:c.keepAlive)===!1){p.value="";return}if(!s.value.some(f=>f.path===l.path)&&l.path!=="/"){let f="";d.navList.forEach(m=>{m.path===l.path&&(f=m.title)});const w=s.value;w.push({title:f,path:l.path,name:l.name}),_.setTabsViews(w)}p.value=l.path},k=()=>{h.push({path:"/"}),_.setTabsViews([])};return P(()=>l.path,()=>{o()}),J(()=>{o()}),(b,c)=>{var S;const f=n("el-tab-pane"),w=n("Close"),m=n("el-icon"),L=n("el-tabs");return a(),x("div",ne,[e(L,{modelValue:p.value,"onUpdate:modelValue":c[0]||(c[0]=g=>p.value=g),onTabChange:u},{default:t(()=>[e(f,{label:"首页",name:"/"}),(a(!0),x(B,null,I(s.value,(g,E)=>(a(),i(f,{key:g.path,label:g.title,name:g.path},{label:t(()=>[v("span",le,[v("span",null,F(g.title),1),e(m,{onClick:T=>r(g,E,T)},{default:t(()=>[e(w)]),_:2},1032,["onClick"])])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"]),((S=s.value)==null?void 0:S.length)>0?(a(),i(m,{key:0,onClick:k,class:"clear-tag",title:"清空全部"},{default:t(()=>[e(w)]),_:1})):V("",!0)])}}}),oe=N({__name:"menuItem",props:{data:{default:()=>[]}},setup(C){return(_,d)=>{const l=n("el-icon"),h=n("menu-item",!0),p=n("el-sub-menu"),s=n("el-menu-item");return a(!0),x(B,null,I(_.data,(u,r)=>(a(),x(B,{key:r},[u.children?(a(),i(p,{key:0,index:u.path||u.title+r},{title:t(()=>[e(l,null,{default:t(()=>[(a(),i(M(u.icon)))]),_:2},1024),v("span",null,F(u.title),1)]),default:t(()=>[e(h,{data:u.children},null,8,["data"])]),_:2},1032,["index"])):(a(),i(s,{key:1,index:u.path||u.title+r},{default:t(()=>[e(l,null,{default:t(()=>[(a(),i(M(u.icon)))]),_:2},1024),v("span",null,F(u.title),1)]),_:2},1032,["index"]))],64))),128)}}}),se=N({__name:"menu",props:{collapse:{type:Boolean}},emits:["getMenuList"],setup(C,{emit:_}){const d=K(),l=D(),h=R(),p=_,s=y([{title:"首页",path:"/",icon:"HomeFilled"},{title:"表单页面",path:"/form",icon:"location"},{title:"列表页面",path:"/list",icon:"collection"},{title:"测试",path:"/test",icon:"collection"},{title:"用户管理",icon:"user",children:[{title:"新增用户",path:"/test"},{title:"用户列表",children:[{title:"普通用户",path:"/test"},{title:"合作用户",path:"/test"},{title:"合作用户2",path:"/test"}]}]},{title:"系统管理",icon:"setting",children:[{title:"用户管理",path:"/test"},{title:"角色管理",path:"/test"},{title:"菜单管理",path:"/test"},{title:"登录日志",path:"/test"},{title:"操作管理",path:"/test"}]}]),u=r=>{d.push({path:r})};return console.log(l),P(()=>l.path,()=>{s.value.forEach(r=>{r.path===l.path&&h.changeBreadcrumb([{label:r.title}])})}),J(()=>{p("getMenuList",s.value)}),(r,o)=>{const k=n("el-menu");return a(),i(k,{collapse:r.collapse,"active-text-color":"#ffd04b","background-color":"rgb(48 65 86)","text-color":"#fff",onSelect:u},{default:t(()=>[e(oe,{data:s.value},null,8,["data"])]),_:1},8,["collapse"])}}}),ce={class:"comm-header-tool"},ue={class:"header-right"},re={class:"header-avatar",style:{cursor:"pointer"}},ie={class:"name"},_e=v("span",{class:"title"},"个人中心",-1),pe=v("span",{class:"title"},"设置",-1),de=v("span",{class:"title"},"退出登录",-1),me=N({__name:"header",props:{collapse:{type:Boolean}},emits:["click"],setup(C,{emit:_}){const d=R(),l=q(()=>d==null?void 0:d.breadcrumb),h=_,p=y({name:"userName",avatar:""}),s=r=>{h("click",r)},u=()=>{console.log("logout")};return(r,o)=>{const k=n("Fold"),b=n("Expand"),c=n("el-icon"),f=n("el-breadcrumb-item"),w=n("el-breadcrumb"),m=n("RefreshRight"),L=n("FullScreen"),S=n("el-avatar"),g=n("arrow-down"),E=n("User"),T=n("el-menu-item"),X=n("Setting"),z=n("CircleClose"),G=n("el-menu"),H=n("el-dropdown");return a(),x(B,null,[e(c,{onClick:o[0]||(o[0]=$=>s("collapse")),class:"collapse-icon"},{default:t(()=>[r.collapse?(a(),i(b,{key:1})):(a(),i(k,{key:0}))]),_:1}),e(w,{separator:"/",class:"breadcrumb"},{default:t(()=>[e(f,{to:{path:"/"}},{default:t(()=>[U("首页")]),_:1}),(a(!0),x(B,null,I(l.value,($,j)=>(a(),i(f,{key:j,to:{path:$.path}},{default:t(()=>[U(F($.label),1)]),_:2},1032,["to"]))),128))]),_:1}),v("div",ce,[e(c,{onClick:o[1]||(o[1]=$=>s("refresh")),title:"刷新页面"},{default:t(()=>[e(m)]),_:1}),e(c,{title:"全屏"},{default:t(()=>[e(L,{onClick:o[2]||(o[2]=$=>s("fullScreen"))})]),_:1})]),v("div",ue,[e(H,null,{dropdown:t(()=>[e(G,{class:"avatar-menu"},{default:t(()=>[e(T,null,{default:t(()=>[e(c,null,{default:t(()=>[e(E)]),_:1}),_e]),_:1}),e(T,null,{default:t(()=>[e(c,null,{default:t(()=>[e(X)]),_:1}),pe]),_:1}),e(T,{onClick:u},{default:t(()=>[e(c,null,{default:t(()=>[e(z)]),_:1}),de]),_:1})]),_:1})]),default:t(()=>[v("div",re,[e(S,{class:"avatar",size:"small",shape:"circle",src:p.value.avatar},null,8,["src"]),v("span",ie,F(p.value.name),1),e(c,{class:"el-icon--right"},{default:t(()=>[e(g)]),_:1})])]),_:1})])],64)}}}),he={class:"logo"},fe=v("img",{src:te},null,-1),be=N({__name:"index",setup(C){const _=R(),d=y(!1),l=y(!1),h=y(!0),p=y([]),s=o=>{o==="collapse"&&(d.value=!d.value),o==="fullScreen"&&(l.value=!l.value),o==="refresh"&&(h.value=!1,ee(()=>{h.value=!0}))},u=o=>{p.value=o},r=q(()=>{const o=_==null?void 0:_.tabs;if(o){const k=[];return o.forEach(b=>{k.push(b.name)}),k}return[]});return(o,k)=>{const b=n("el-aside"),c=n("el-header"),f=n("router-view"),w=n("el-main"),m=n("el-container"),L=n("Close"),S=n("el-icon");return a(),i(m,{class:"common-layout"},{default:t(()=>[l.value?V("",!0):(a(),i(b,{key:0,width:d.value?"64px":"220px",class:"common-sidebar"},{default:t(()=>[v("div",he,[fe,W(v("span",null,"XX管理系统",512),[[Y,!d.value]])]),e(se,{collapse:d.value,onGetMenuList:u},null,8,["collapse"])]),_:1},8,["width"])),e(m,{class:"common-container"},{default:t(()=>[l.value?V("",!0):(a(),i(c,{key:0,class:"common-header"},{default:t(()=>[e(me,{onClick:s,collapse:d.value},null,8,["collapse"])]),_:1})),l.value?V("",!0):(a(),i(ae,{key:1,navList:p.value},null,8,["navList"])),e(w,{class:"common-main"},{default:t(()=>[h.value?(a(),i(f,{key:0},{default:t(({Component:g})=>[(a(),i(Z,{include:r.value},[(a(),i(M(g)))],1032,["include"]))]),_:1})):V("",!0)]),_:1})]),_:1}),l.value?(a(),i(S,{key:1,class:"quit-full",onClick:k[0]||(k[0]=g=>s("fullScreen")),title:"退出全屏"},{default:t(()=>[e(L)]),_:1})):V("",!0)]),_:1})}}});export{be as default};
