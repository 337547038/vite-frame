import{d as j,a as N,u as q,b as J,r as y,c as I,w as K,o as O,e as n,f as o,g as x,h as e,i as t,F as B,j as U,k as r,l as f,t as F,m as V,n as M,p as A,q as Q,v as W,K as Y,s as Z}from"./index-da005931.js";const ee=""+new URL("logo-03d6d6da.png",import.meta.url).href;const D=window.sessionStorage.getItem("tagViews");let X=[];D&&(X=JSON.parse(D));const R=j("layout",{state:()=>({breadcrumb:[],tabs:X}),actions:{changeBreadcrumb(w){this.breadcrumb=w},setTabsViews(w){this.tabs=w,window.sessionStorage.setItem("tagViews",JSON.stringify(w))}}}),te={class:"tag-tabs"},ne={class:"tabs-label"},le=N({__name:"tagViews",props:{navList:{default:()=>[]}},setup(w){const g=w,s=R(),a=q(),_=J(),c=y(),p=I(()=>(s==null?void 0:s.tabs)||[]),l=u=>{c.value=u,_.push({path:u})},d=(u,h,v)=>{const k=p.value.filter(m=>m.path!==u.path);if(h>0){const m=p.value[h-1].path;c.value=m,_.push({path:m})}else h===0&&_.push({path:"/"});s.setTabsViews(k),v.stopPropagation()},i=()=>{var h;if(((h=a.meta)==null?void 0:h.keepAlive)===!1){c.value="";return}if(!p.value.some(v=>v.path===a.path)&&a.path!=="/"){let v="";g.navList.forEach(m=>{m.path===a.path&&(v=m.title)});const k=p.value;k.push({title:v,path:a.path,name:a.name}),s.setTabsViews(k)}c.value=a.path},C=()=>{_.push({path:"/"}),s.setTabsViews([])};return K(()=>a.path,()=>{i()}),O(()=>{i()}),(u,h)=>{var S;const v=n("el-tab-pane"),k=n("Close"),m=n("el-icon"),L=n("el-tabs");return o(),x("div",te,[e(L,{modelValue:c.value,"onUpdate:modelValue":h[0]||(h[0]=b=>c.value=b),onTabClick:l},{default:t(()=>[e(v,{label:"首页",name:"/"}),(o(!0),x(B,null,U(p.value,(b,T)=>(o(),r(v,{key:b.path,label:b.title,name:b.path},{label:t(()=>[f("span",ne,[f("span",null,F(b.title),1),e(m,{onClick:E=>d(b,T,E)},{default:t(()=>[e(k)]),_:2},1032,["onClick"])])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"]),((S=p.value)==null?void 0:S.length)>0?(o(),r(m,{key:0,onClick:C,class:"clear-tag",title:"清空全部"},{default:t(()=>[e(k)]),_:1})):V("",!0)])}}}),ae=N({__name:"menuItem",props:{data:{default:()=>[]}},setup(w){return(g,s)=>{const a=n("el-icon"),_=n("menu-item",!0),c=n("el-sub-menu"),p=n("el-menu-item");return o(!0),x(B,null,U(g.data,(l,d)=>(o(),x(B,{key:d},[l.children?(o(),r(c,{key:0,index:l.path||l.title+d},{title:t(()=>[e(a,null,{default:t(()=>[(o(),r(M(l.icon)))]),_:2},1024),f("span",null,F(l.title),1)]),default:t(()=>[e(_,{data:l.children},null,8,["data"])]),_:2},1032,["index"])):(o(),r(p,{key:1,index:l.path||l.title+d},{default:t(()=>[e(a,null,{default:t(()=>[(o(),r(M(l.icon)))]),_:2},1024),f("span",null,F(l.title),1)]),_:2},1032,["index"]))],64))),128)}}}),oe=N({__name:"menu",props:{collapse:{type:Boolean}},emits:["getMenuList"],setup(w,{emit:g}){const s=J(),a=q(),_=R(),c=y([{title:"首页",path:"/",icon:"HomeFilled"},{title:"表单页面",path:"/form",icon:"location"},{title:"表单页面2",path:"/form2",icon:"location"},{title:"列表页面",path:"/list",icon:"collection"},{title:"测试",path:"/test",icon:"collection"},{title:"用户管理",icon:"user",children:[{title:"新增用户",path:"/test"},{title:"用户列表",children:[{title:"普通用户",path:"/test"},{title:"合作用户",path:"/test"},{title:"合作用户2",path:"/test"}]}]},{title:"系统管理",icon:"setting",children:[{title:"用户管理",path:"/test"},{title:"角色管理",path:"/test"},{title:"菜单管理",path:"/test"},{title:"登录日志",path:"/test"},{title:"操作管理",path:"/test"}]}]),p=l=>{s.push({path:l})};return console.log(a),K(()=>a.path,()=>{c.value.forEach(l=>{l.path===a.path&&_.changeBreadcrumb([{label:l.title}])})}),O(()=>{g("getMenuList",c.value)}),(l,d)=>{const i=n("el-menu");return o(),r(i,{collapse:l.collapse,"active-text-color":"#ffd04b","background-color":"rgb(48 65 86)","text-color":"#fff",onSelect:p},{default:t(()=>[e(ae,{data:c.value},null,8,["data"])]),_:1},8,["collapse"])}}}),se={class:"comm-header-tool"},ce={class:"header-right"},ue={class:"header-avatar",style:{cursor:"pointer"}},re={class:"name"},ie=f("span",{class:"title"},"个人中心",-1),_e=f("span",{class:"title"},"设置",-1),pe=f("span",{class:"title"},"退出登录",-1),de=N({__name:"header",props:{collapse:{type:Boolean}},emits:["click"],setup(w,{emit:g}){const s=R(),a=I(()=>s==null?void 0:s.breadcrumb),_=y({name:"userName",avatar:""}),c=l=>{g("click",l)},p=()=>{console.log("logout")};return(l,d)=>{const i=n("Fold"),C=n("Expand"),u=n("el-icon"),h=n("el-breadcrumb-item"),v=n("el-breadcrumb"),k=n("RefreshRight"),m=n("FullScreen"),L=n("el-avatar"),S=n("arrow-down"),b=n("User"),T=n("el-menu-item"),E=n("Setting"),z=n("CircleClose"),G=n("el-menu"),H=n("el-dropdown");return o(),x(B,null,[e(u,{class:"collapse-icon",onClick:d[0]||(d[0]=$=>c("collapse"))},{default:t(()=>[l.collapse?(o(),r(C,{key:1})):(o(),r(i,{key:0}))]),_:1}),e(v,{class:"breadcrumb",separator:"/"},{default:t(()=>[e(h,{to:"/"},{default:t(()=>[A("首页")]),_:1}),(o(!0),x(B,null,U(a.value,($,P)=>(o(),r(h,{key:P,to:$.path},{default:t(()=>[A(F($.label),1)]),_:2},1032,["to"]))),128))]),_:1}),f("div",se,[e(u,{title:"刷新页面",onClick:d[1]||(d[1]=$=>c("refresh"))},{default:t(()=>[e(k)]),_:1}),e(u,{title:"全屏"},{default:t(()=>[e(m,{onClick:d[2]||(d[2]=$=>c("fullScreen"))})]),_:1})]),f("div",ce,[e(H,null,{dropdown:t(()=>[e(G,{class:"avatar-menu"},{default:t(()=>[e(T,null,{default:t(()=>[e(u,null,{default:t(()=>[e(b)]),_:1}),ie]),_:1}),e(T,null,{default:t(()=>[e(u,null,{default:t(()=>[e(E)]),_:1}),_e]),_:1}),e(T,{onClick:p},{default:t(()=>[e(u,null,{default:t(()=>[e(z)]),_:1}),pe]),_:1})]),_:1})]),default:t(()=>[f("div",ue,[e(L,{src:_.value.avatar,class:"avatar",shape:"circle",size:"small"},null,8,["src"]),f("span",re,F(_.value.name),1),e(u,{class:"el-icon--right"},{default:t(()=>[e(S)]),_:1})])]),_:1})])],64)}}});const me={class:"logo"},he=f("img",{src:ee},null,-1),ve=N({__name:"index",setup(w){const g=R(),s=y(!1),a=y(!1),_=y(!0),c=y([]),p=i=>{i==="collapse"&&(s.value=!s.value),i==="fullScreen"&&(a.value=!a.value),i==="refresh"&&(_.value=!1,Z(()=>{_.value=!0}))},l=i=>{c.value=i},d=I(()=>{const i=g==null?void 0:g.tabs;if(i){const C=[];return i.forEach(u=>{C.push(u.name)}),C}return[]});return(i,C)=>{const u=n("el-aside"),h=n("el-header"),v=n("router-view"),k=n("el-main"),m=n("el-container"),L=n("Close"),S=n("el-icon");return o(),r(m,{class:"common-layout"},{default:t(()=>[a.value?V("",!0):(o(),r(u,{key:0,width:s.value?"64px":"220px",class:"common-sidebar"},{default:t(()=>[f("div",me,[he,Q(f("span",null,"XX管理系统",512),[[W,!s.value]])]),e(oe,{collapse:s.value,onGetMenuList:l},null,8,["collapse"])]),_:1},8,["width"])),e(m,{class:"common-container"},{default:t(()=>[a.value?V("",!0):(o(),r(h,{key:0,class:"common-header"},{default:t(()=>[e(de,{collapse:s.value,onClick:p},null,8,["collapse"])]),_:1})),a.value?V("",!0):(o(),r(le,{key:1,navList:c.value},null,8,["navList"])),e(k,{class:"common-main"},{default:t(()=>[_.value?(o(),r(v,{key:0},{default:t(({Component:b})=>[(o(),r(Y,{include:d.value},[(o(),r(M(b)))],1032,["include"]))]),_:1})):V("",!0)]),_:1})]),_:1}),a.value?(o(),r(S,{key:1,class:"quit-full",title:"退出全屏",onClick:C[0]||(C[0]=b=>p("fullScreen"))},{default:t(()=>[e(L)]),_:1})):V("",!0)]),_:1})}}});export{ve as default};
